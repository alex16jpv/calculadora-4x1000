class TaxCalculator{constructor(){this.taxRate=.004,this.initializeElements(),this.bindEvents()}initializeElements(){this.amountInput=document.getElementById("amount-input"),this.errorMessage=document.getElementById("amount-error"),this.resultsSection=document.getElementById("results"),this.discountAmountElement=document.getElementById("discount-amount"),this.netAmountElement=document.getElementById("net-amount"),this.grossAmountElement=document.getElementById("gross-amount")}bindEvents(){this.amountInput.addEventListener("input",t=>this.handleInput(t)),this.amountInput.addEventListener("keypress",t=>this.handleKeyPress(t)),this.amountInput.addEventListener("paste",t=>this.handlePaste(t))}handleKeyPress(t){let e=/^[0-9]$/.test(t.key);e||["Backspace","Delete","ArrowLeft","ArrowRight","Tab",].includes(t.key)||t.preventDefault()}handlePaste(t){t.preventDefault();let e=(t.clipboardData||window.clipboardData).getData("text"),s=this.extractNumericValue(e);null!==s&&(this.amountInput.value=this.formatCurrency(s),this.calculateTaxes(s))}handleInput(t){let e=t.target,s=e.value,r=this.extractNumericValue(s);if(null===r||r<0){this.showError("Por favor ingresa un monto v\xe1lido"),this.hideResults();return}if(r>999999999999){this.showError("El monto no puede ser mayor a $999,999,999,999"),this.hideResults();return}this.clearError(),this.calculateTaxes(r)}extractNumericValue(t){let e=t.replace(/[^\d.]/g,"");if(""===e||"."===e)return 0;let s=parseFloat(e);return isNaN(s)?null:s}formatCurrency(t){return 0===t?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}formatCurrencyDisplay(t){return"$"+new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}calculateTaxes(t){if(t<=0){this.hideResults();return}let e=Math.round(t*this.taxRate);this.discountAmountElement.textContent=this.formatCurrencyDisplay(e),this.netAmountElement.textContent=this.formatCurrencyDisplay(t-e),this.grossAmountElement.textContent=this.formatCurrencyDisplay(t+e),this.showResults()}showError(t){this.errorMessage.textContent=t,this.errorMessage.classList.add("show"),this.amountInput.classList.add("error")}clearError(){this.errorMessage.classList.remove("show"),this.amountInput.classList.remove("error")}showResults(){this.resultsSection.classList.add("show")}hideResults(){this.resultsSection.classList.remove("show")}}document.addEventListener("DOMContentLoaded",()=>{new TaxCalculator;let t=document.getElementById("email-link"),e=encodeURIComponent("Consulta desde la calculadora 4x1000"),s="contacto4x1000@alexpiral.com",r=`mailto:contacto4x1000@alexpiral.com?subject=${e}`;t.setAttribute("href",r)});