class TaxCalculator{constructor(){this.taxRate=.004,this.initializeElements(),this.bindEvents()}initializeElements(){this.amountInput=document.getElementById("amount-input"),this.errorMessage=document.getElementById("amount-error"),this.resultsSection=document.getElementById("results"),this.discountAmountElement=document.getElementById("discount-amount"),this.netAmountElement=document.getElementById("net-amount"),this.grossAmountElement=document.getElementById("gross-amount")}bindEvents(){this.amountInput.addEventListener("input",(t=>this.handleInput(t))),this.amountInput.addEventListener("keypress",(t=>this.handleKeyPress(t))),this.amountInput.addEventListener("paste",(t=>this.handlePaste(t)))}handleKeyPress(t){/^[0-9]$/.test(t.key)||["Backspace","Delete","ArrowLeft","ArrowRight","Tab"].includes(t.key)||t.preventDefault()}handlePaste(t){const e=(t.clipboardData||window.clipboardData).getData("text"),s=this.extractNumericValue(e);null!==s&&setTimeout((()=>{this.amountInput.value=this.formatCurrency(s),this.calculateTaxes(s)}),0)}handleInput(t){let e=t.target.value;const s=this.extractNumericValue(e);return null===s||s<0?(this.showError("Por favor ingresa un monto vÃ¡lido"),void this.hideResults()):s>999999999999?(this.showError("El monto no puede ser mayor a $999,999,999,999"),void this.hideResults()):(this.clearError(),void this.calculateTaxes(s))}extractNumericValue(t){const e=t.replace(/[^\d.]/g,"");if(""===e||"."===e)return 0;const s=parseFloat(e);return isNaN(s)?null:s}formatCurrency(t){return 0===t?"0":new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}formatCurrencyDisplay(t){return"$"+new Intl.NumberFormat("es-CO",{minimumFractionDigits:0,maximumFractionDigits:2}).format(t)}calculateTaxes(t){if(t<=0)return void this.hideResults();const e=Math.round(t*this.taxRate),s=t-e,n=t+e;this.discountAmountElement.textContent=this.formatCurrencyDisplay(e),this.netAmountElement.textContent=this.formatCurrencyDisplay(s),this.grossAmountElement.textContent=this.formatCurrencyDisplay(n),this.showResults()}showError(t){this.errorMessage.textContent=t,this.errorMessage.classList.add("show"),this.amountInput.classList.add("error")}clearError(){this.errorMessage.classList.remove("show"),this.amountInput.classList.remove("error")}showResults(){this.resultsSection.classList.add("show")}hideResults(){this.resultsSection.classList.remove("show")}}document.addEventListener("DOMContentLoaded",(()=>{new TaxCalculator;const t=document.getElementById("email-link"),e=`mailto:contacto4x1000@alexpiral.com?subject=${encodeURIComponent("Consulta desde la calculadora 4x1000")}`;t.setAttribute("href",e)}));